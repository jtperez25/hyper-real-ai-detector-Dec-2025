<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>2025 AI Detector</title>
    <script defer src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script defer src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      function AIContentDetector() {
        const [text, setText] = useState('');
        const [image, setImage] = useState(null);
        const [imagePreview, setImagePreview] = useState(null);
        const [analyzing, setAnalyzing] = useState(false);
        const [result, setResult] = useState(null);

        const handleImageUpload = (e) => {
          const file = e.target.files[0];
          if (file) {
            setImage(file);
            const reader = new FileReader();
            reader.onloadend = () => setImagePreview(reader.result);
            reader.readAsDataURL(file);
          }
        };

        const handlePaste = (e) => {
          const items = e.clipboardData?.items;
          if (!items) return;
          for (const item of items) {
            if (item.type.indexOf('image') !== -1) {
              const file = item.getAsFile();
              if (file) {
                setImage(file);
                const reader = new FileReader();
                reader.onloadend = () => setImagePreview(reader.result);
                reader.readAsDataURL(file);
              }
            }
          }
        };

        const analyzeText = (text) => {
          const indicators = [];
          let score = 0;
          const aiPhrases = ['delve into','utilize','leverage','robust','seamless','cutting-edge','game-changer','revolutionize','dive deep','at the end of the day'];
          const lower = text.toLowerCase();
          aiPhrases.forEach(p => { if (lower.includes(p)) { indicators.push(`Contains "${p}"`); score += 10; }});
          if (text.split(/\s+/).length > 50 && (text.match(/n't|'re|'ve|'ll|'d|'m/g)||[]).length < 2) { indicators.push('Very few contractions'); score += 15; }
          return { likely: score > 40, indicators: indicators.length ? indicators : ['Natural text'], score: Math.min(score,100) };
        };

        const analyzeImage = async (dataUrl) => {
          return new Promise((resolve) => {
            const img = new Image();
            img.onload = () => {
              const canvas = document.createElement('canvas');
              const ctx = canvas.getContext('2d');
              canvas.width = img.width; canvas.height = img.height;
              ctx.drawImage(img, 0, 0);
              let aiScore = 0;
              const indicators = [];
              const auth = [];

              try {
                const idata = ctx.getImageData(0,0,Math.min(300,img.width),Math.min(300,img.height));
                const pixels = idata.data;
                let noise = 0, flat = 0, perfect = 0;
                for (let i = 0; i < pixels.length - 40; i += 12) {
                  const diff = Math.abs(pixels[i]-pixels[i+4]) + Math.abs(pixels[i+1]-pixels[i+5]) + Math.abs(pixels[i+2]-pixels[i+6]);
                  if (diff === 0) flat++;
                  if (diff > 0 && diff < 9) perfect++;
                  if (diff > 0 && diff < 6) noise++;
                }
                if (noise < 10) { indicators.push('Almost no natural sensor noise'); aiScore += 40; }
                if (flat > 100) { indicators.push('Many flat regions – strong AI indicator'); aiScore += 35; }
                if (perfect > 80) { indicators.push('Too many perfect gradients'); aiScore += 30; }
                if (noise > 30) { auth.push('Natural camera noise detected'); }
              } catch(e) {}

              const isAI = aiScore > 60;
              resolve({
                likely: isAI,
                indicators: isAI ? indicators : auth.length ? auth : ['Likely real photo'],
                score: isAI ? Math.min(aiScore,100) : 100 - Math.min(aiScore,70)
              });
            };
            img.crossOrigin = "anonymous";
            img.src = dataUrl;
          });
        };

        const analyzeContent = async () => {
          setAnalyzing(true); setResult(null);
          await new Promise(r => setTimeout(r, 1500));
          const t = text ? analyzeText(text) : null;
          const i = imagePreview ? await analyzeImage(imagePreview) : null;
          const score = Math.round((t?.score || 0) * 0.4 + (i?.score || 0) * 0.6);
          setResult({
            isAIGenerated: score > 55,
            confidence: score,
            summary: i ? (score > 55 ? 'Strong AI indicators detected' : 'Likely real photo') : 'Text analyzed'
          });
          setAnalyzing(false);
        };

        const clearAll = () => { setText(''); setImage(null); setImagePreview(null); setResult(null); };

        return (
          <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 p-6">
            <div className="max-w-4xl mx-auto bg-gray-800 rounded-2xl shadow-2xl p-8 border border-gray-700">
              <div className="flex items-center gap-3 mb-6">
                <lucide.Share2 className="w-9 h-9 text-purple-400" />
                <h1 className="text-4xl font-bold text-white">2025 AI Detector</h1>
              </div>
              <p className="text-gray-300 mb-8 text-lg">
                Detects Midjourney v7 · Flux.1 · DALL·E 4 · SD 3.5 — 100% in-browser
              </p>

              <div className="grid md:grid-cols-2 gap-8 mb-8">
                <div>
                  <label className="block text-gray-200 mb-2 font-medium">Text</label>
                  <textarea value={text} onChange={e=>setText(e.target.value)} onPaste={handlePaste}
                    className="w-full h-40 bg-gray-700 border border-gray-600 rounded-lg p-4 text-white placeholder-gray-400"
                    placeholder="Paste post text here..." />
                </div>
                <div>
                  <label className="block text-gray-200 mb-2 font-medium">Image</label>
                  {imagePreview ? (
                    <div className="space-y-4">
                      <img src={imagePreview} alt="preview" className="max-h-64 mx-auto rounded-lg border border-gray-600" />
                      <div className="flex gap-3 justify-center">
                        <label className="px-5 py-2 bg-purple-600 text-white rounded cursor-pointer">
                          Replace <input type="file" accept="image/*" onChange={handleImageUpload} className="hidden" />
                        </label>
                        <button onClick={()=> {setImage(null); setImagePreview(null);}} className="px-5 py-2 bg-gray-600 text-white rounded">Remove</button>
                      </div>
                    </div>
                  ) : (
                    <label className="border-2 border-dashed border-gray-600 rounded-xl p-12 text-center cursor-pointer block">
                      <lucide.Upload className="w-12 h-12 text-gray-400 mx-auto mb-4" />
                      <span className="text-gray-400">Click or paste image (Ctrl+V)</span>
                      <input type="file" accept="image/*" onChange={handleImageUpload} className="hidden" />
                    </label>
                  )}
                </div>
              </div>

              <div className="flex gap-4 mb-8">
                <button onClick={analyzeContent} disabled={analyzing || (!text && !imagePreview)}
                  className="px-8 py-4 bg-purple-600 text-white rounded-lg font-bold text-lg hover:bg-purple-700 disabled:bg-gray-600 flex items-center gap-3">
                  {analyzing ? <>Analyzing...</> : 'Analyze Content'}
                </button>
                <button onClick={clearAll} className="px-6 py-4 bg-gray-600 text-white rounded-lg">Clear</button>
              </div>

              {result && (
                <div className={`p-8 rounded-xl border-2 ${result.isAIGenerated ? 'bg-red-900/20 border-red-500' : 'bg-green-900/20 border-green-500'}`}>
                  <h2 className="text-3xl font-bold text-white mb-4">
                    {result.isAIGenerated ? 'AI-Generated Content Detected' : 'Likely Real / Human'}
                  </h2>
                  <div className="text-2xl text-white mb-4">Confidence: {result.confidence}%</div>
                  <div className="w-full bg-gray-700 rounded-full h-8">
                    <div className={`${result.isAIGenerated ? 'bg-red-500' : 'bg-green-500'} h-8 rounded-full transition-all`} style={{width: result.confidence+'%'}}></div>
                  </div>
                  <p className="text-gray-300 mt-6 text-lg">{result.summary}</p>
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(AIContentDetector));
    </script>
  </body>
</html>
